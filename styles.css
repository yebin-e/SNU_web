.sidebar-section{position:relative}
/* 컬러 시스템 */
:root {
    --bg: #f6f8fb;
    --surface: #ffffff;
    --text: #1f2937;
    --muted: #6b7280;
    --border: #e5e7eb;
    --primary: #3b82f6; /* 유지: 선택 하이라이트 등 */
    --primary-dark: #326fd2;
    --header-bg: #f8f1e4; /* 베이지 */
    --button: #ffffff; /* 네이비 배경용 화이트 버튼 */
    --button-dark: #e5e7eb;
    --accent: #10b981;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body { 
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
    color: var(--text);
    background:
        radial-gradient(1000px 700px at 20% 25%, rgba(255,255,255,0.06) 0%, rgba(255,255,255,0) 60%),
        linear-gradient(180deg, rgba(11, 31, 77, 0.85) 0%, rgba(30, 64, 175, 0.65) 35%, rgba(59, 130, 246, 0.55) 65%, rgba(147, 197, 253, 0.45) 100%);
    background-attachment: fixed;
}

/* 인트로 사진과 배경의 하단 경계 자연스러운 연결용 페이드 */
.intro-screen::after{
    content:"";
    position:absolute;
    left:0; right:0; bottom:0;
    height:22vh;
    background:linear-gradient(to bottom, rgba(11,31,77,0) 0%, rgba(11,31,77,0.35) 35%, rgba(30,64,175,0.55) 100%);
    pointer-events:none;
}

/* 화면이 좌우로 끝없이 늘어나는 현상 방지 */
html, body { max-width: 100%; overflow-x: hidden; }

/* 메인 컨테이너 세로 길이 제어: 화면 높이에 맞춘 레이아웃 유지 */
.container { min-height: 100vh; max-height: 100vh; overflow-y: auto; }

/* 상단 필터 바 (연령 + 링 카드) */
.top-filters-bar { display:none; }
.combo-card { display:none; }
.combo-item { padding:.45rem .7rem; border-radius:999px; border:2px solid transparent; background:#ffffff; color:#111827; font-size:.9rem; }
.combo-item[data-tri="comfort"] { border-color: rgba(20,184,166,.6); }
.combo-item[data-tri="study"] { border-color: rgba(96,165,250,.6); }
.combo-sep { width: 36px; height: 2px; background: linear-gradient(90deg, rgba(20,184,166,.5), rgba(96,165,250,.5)); border-radius:2px; }
.ring-card { position:relative; display:flex; align-items:center; gap:.5rem; padding:.5rem .8rem; border-radius:999px; border:2px solid rgba(148,163,184,.6); background:#ffffff; box-shadow:0 1px 2px rgba(0,0,0,0.04); font-size:.9rem; color:#111827; }
.link-card { border-color: rgba(148,163,184,.6); }
.age-card { display:flex; align-items:center; gap:.5rem; border:1px solid var(--border); background:#ffffff; padding:.4rem .6rem; border-radius:999px; }
.age-card .age-label { font-size:.9rem; color:#0f172a; }
.age-card .age-select { padding:.4rem .6rem; border:1px solid var(--border); border-radius:10px; background:#ffffff; color:#111827; min-height:36px; }
.tri-filters .ring-card::before { content:""; width:10px; height:10px; border:2px solid #60a5fa; border-radius:50%; display:inline-block; }

/* 인트로 화면 */
.intro-screen { position: relative; width: 100%; min-height: 100vh; background: transparent; display: flex; align-items: center; justify-content: center; transition: opacity 0.4s ease; overflow: hidden; }

/* 시네마틱 레이어 */
.cine-bg{position:absolute;inset:0;background-size:cover;background-position:center;will-change:transform,filter,opacity;pointer-events:none}
.cine-bg-1{background-image:url('modern-library-night.png');opacity:.6;mix-blend-mode:normal;filter:brightness(1) saturate(1);transition:opacity .4s ease}
.cine-bg-2{background-image:none;opacity:0}
.float-icons{position:absolute;inset:0;pointer-events:none;z-index:1;overflow:hidden}
.float-icons .fi{position:absolute;width:26px;height:26px;border-radius:50%;background:radial-gradient(circle at 30% 30%, rgba(255,255,255,0.9), rgba(59,130,246,0.5), rgba(59,130,246,0));box-shadow:0 2px 10px rgba(0,0,0,0.15);opacity:.85;will-change:transform,opacity,box-shadow;animation:twinkle var(--twinkleDur,2.4s) ease-in-out var(--twinkleDelay,0s) infinite alternate}
@keyframes twinkle{0%{opacity:.6;box-shadow:0 2px 8px rgba(255,255,255,.1),0 0 0 rgba(59,130,246,0)}50%{opacity:.98;box-shadow:0 2px 14px rgba(255,255,255,.35),0 0 12px rgba(59,130,246,.3)}100%{opacity:.75;box-shadow:0 2px 10px rgba(255,255,255,.2),0 0 0 rgba(59,130,246,0)}}
.rings3d{position:absolute;inset:0;display:grid;place-items:center;perspective:800px;transform-style:preserve-3d;pointer-events:none;z-index:0}
.rings3d .ring{position:absolute;width:min(70vmin,560px);height:min(70vmin,560px);border-radius:50%;border:2px solid rgba(59,130,246,0.25);box-shadow:0 0 40px rgba(59,130,246,0.25) inset;will-change:transform,opacity}
.rings3d .ring-1{width:min(54vmin,432px);height:min(54vmin,432px)}
.rings3d .ring-2{width:min(38vmin,304px);height:min(38vmin,304px)}
.mouse-gradient-overlay{position:absolute;inset:0;pointer-events:none;z-index:2;background:radial-gradient(600px circle at 50% 50%, rgba(6,182,212,0.1), transparent 40%);mix-blend-mode:soft-light}

/* 커서 트레일/스파클 */
.cursor-trail{position:fixed;width:8px;height:8px;border-radius:50%;background:radial-gradient(circle at 30% 30%, rgba(255,255,255,0.95), rgba(59,130,246,0.6));pointer-events:none;transform:translate(-50%,-50%);animation:trail-fade .7s ease forwards;z-index:10000}
.sparkle{position:fixed;width:10px;height:10px;background:radial-gradient(circle, #fff, rgba(59,130,246,0.4) 60%, transparent 70%);border-radius:50%;pointer-events:none;transform:translate(-50%,-50%) scale(.8);animation:sparkle-pop .8s ease-out forwards;z-index:10000}
@keyframes trail-fade{0%{opacity:.9;filter:blur(0)}100%{opacity:0;filter:blur(4px);transform:translate(-50%,-50%) scale(.5)}}
@keyframes sparkle-pop{0%{opacity:0;transform:translate(-50%,-50%) scale(.6)}20%{opacity:1;transform:translate(-50%,-50%) scale(1)}100%{opacity:0;transform:translate(-50%,-50%) scale(.2)}}

/* enter-cine 제거 */

/* entry-fx 제거 */

/* 시네마틱 패럴랙스 레이어 */
.cine-bg {
    position: absolute;
    inset: 0;
    background-size: cover;
    background-position: center;
    will-change: transform, filter, opacity;
    transform: translateZ(0);
    pointer-events: none;
}
.cine-bg.bg-1 {
    z-index: -3;
    background-image: url('img/adult_walk.gif');
    opacity: 1;
}
.cine-bg.bg-2 {
    z-index: -2;
    background-image: url('img/child_run.gif');
    opacity: 0;
}

.float-icons {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 1;
    overflow: hidden;
}
.float-icons .fi {
    position: absolute;
    width: 28px; height: 28px;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.9), rgba(244,208,130,0.6), rgba(139,94,60,0.0));
    box-shadow: 0 2px 10px rgba(0,0,0,0.15);
    will-change: transform, opacity;
    opacity: 0.85;
}

.rings3d {
    position: absolute;
    inset: 0;
    display: grid;
    place-items: center;
    perspective: 800px;
    transform-style: preserve-3d;
    pointer-events: none;
    z-index: 0;
}
.rings3d .ring {
    position: absolute;
    width: min(70vmin, 560px);
    height: min(70vmin, 560px);
    border-radius: 50%;
    border: 2px solid rgba(139,94,60,0.25);
    box-shadow: 0 0 40px rgba(244,208,130,0.25) inset;
    will-change: transform, opacity;
}
.rings3d .ring-1 { width: min(54vmin, 432px); height: min(54vmin, 432px); }
.rings3d .ring-2 { width: min(38vmin, 304px); height: min(38vmin, 304px); }

.mouse-gradient-overlay {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 2;
    background: radial-gradient(400px circle at 50% 50%, rgba(255,255,255,0.12), transparent 60%);
    mix-blend-mode: soft-light;
}

.scroll-progress {
    position: absolute;
    right: 16px;
    top: 16px;
    bottom: 16px;
    width: 4px;
    background: rgba(139,94,60,0.15);
    border-radius: 999px;
    overflow: hidden;
    z-index: 3;
}
.scroll-progress .bar {
    position: absolute;
    left: 0; bottom: 0;
    width: 100%;
    height: 0%;
    background: linear-gradient(180deg, #60a5fa, #3b82f6);
}

/* 커서 트레일/스파클 */
.cursor-trail {
    position: fixed;
    width: 8px; height: 8px;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.95), rgba(59,130,246,0.7));
    pointer-events: none;
    transform: translate(-50%, -50%);
    animation: trail-fade 700ms ease forwards;
    z-index: 10000;
}
.sparkle {
    position: fixed;
    width: 10px; height: 10px;
    background: radial-gradient(circle, rgba(255,255,255,1), rgba(59,130,246,0.4) 60%, transparent 70%);
    border-radius: 50%;
    pointer-events: none;
    transform: translate(-50%, -50%) scale(0.8);
    animation: sparkle-pop 800ms ease-out forwards;
    z-index: 10000;
}

@keyframes trail-fade {
    0% { opacity: 0.9; filter: blur(0px); }
    100% { opacity: 0; filter: blur(4px); transform: translate(-50%, -50%) scale(0.5); }
}
@keyframes sparkle-pop {
    0% { opacity: 0; transform: translate(-50%, -50%) scale(0.6); }
    20% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
    100% { opacity: 0; transform: translate(-50%, -50%) scale(0.2); }
}

.intro-screen.hidden {
    transform: translateY(-100%);
    opacity: 0;
    pointer-events: none;
}

.intro-content { text-align: center; color: #ffffff; max-width: 600px; padding: 2rem; animation: fadeInUp 1s ease 0.5s both; position: relative; height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; }

.intro-logo {
    margin-bottom: 2rem;
    animation: bounce 2s infinite 1.5s;
    display: flex;
    justify-content: center;
    align-items: center;
}

.library-icon { width: 6rem; height: 6rem; color: #ffffff; filter: drop-shadow(0 4px 10px rgba(0,0,0,0.35)); }

.intro-title {
    font-size: 2.7rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
    text-shadow: 0 4px 12px rgba(139, 94, 60, 0.18);
    animation: fadeIn 0.8s ease 0.8s both;
}

.intro-subtitle {
    font-size: 1.25rem;
    margin-bottom: 6rem;
    opacity: 0.9;
    animation: fadeIn 0.8s ease 1s both;
}

.scroll-indicator { position: absolute; bottom: 4rem; left: 50%; transform: translateX(-50%); text-align: center; color: #ffffff; animation: fadeIn 0.8s ease 1.5s both; z-index: 10; background: rgba(255, 255, 255, 0.12); padding: 1rem 1.5rem; border-radius: 25px; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.25); }

.scroll-indicator span {
    display: block;
    font-size: 0.9rem;
    margin-bottom: 0.5rem;
}

.scroll-arrow {
    font-size: 1.5rem;
    animation: bounce 1.5s infinite;
}

/* 중간 화면 */
.middle-screen { position: relative; width: 100%; min-height: 100vh; background: transparent; display: flex; align-items: center; justify-content: center; }

.middle-screen.hidden {
    transform: translateY(-100%);
    opacity: 0;
    pointer-events: none;
}

.middle-content {
    text-align: center;
    color: #8b5e3c;
    max-width: 600px;
    padding: 2rem;
    position: relative;
    height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    animation: fadeInUp 1s ease 0.5s both;
}

.middle-logo {
    margin-bottom: 2rem;
    animation: bounce 2s infinite 1.5s;
    display: flex;
    justify-content: center;
    align-items: center;
}

.search-icon { width: 6rem; height: 6rem; color: #ffffff; filter: drop-shadow(0 4px 10px rgba(0,0,0,0.35)); }

.middle-title { font-size: 2.5rem; font-weight: 700; margin-bottom: 1.5rem; text-shadow: 0 2px 10px rgba(0,0,0,0.35); animation: fadeIn 0.8s ease 0.8s both; }

.middle-subtitle { font-size: 1.2rem; margin-bottom: 3rem; opacity: 0.9; animation: fadeIn 0.8s ease 1s both; }

/* 메뉴 버튼들 */
.menu-buttons {
    display: flex;
    flex-direction: row;
    gap: 2.5rem;
    width: 100%;
    max-width: 1400px;
    margin: 0 auto;
    justify-content: center;
    align-items: stretch;
    padding: 0 1rem;
    box-sizing: border-box;
}

.menu-btn { 
    background: rgba(255,255,255,0.08); 
    border: 2px solid rgba(255,255,255,0.25); 
    border-radius: 15px; 
    padding: 2.5rem 2rem; 
    cursor: pointer; 
    transition: all 0.3s ease; 
    text-align: center; 
    color: #ffffff; 
    backdrop-filter: blur(10px); 
    animation: fadeInUp 0.6s ease both;
    flex: 1;
    min-width: 350px;
    min-height: 250px;
    width: 100%;
}

.menu-btn:nth-child(1) { animation-delay: 1.2s; }
.menu-btn:nth-child(2) { animation-delay: 1.4s; }

.menu-btn:hover { background: rgba(255,255,255,0.18); border-color: rgba(255,255,255,0.5); transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0, 0, 0, 0.35); }

.menu-icon {
    font-size: 3.5rem;
    margin-bottom: 1rem;
}

.menu-text { 
    font-size: 1.5rem; 
    font-weight: 600; 
    margin-bottom: 0.7rem; 
    color: #ffffff; 
}

.menu-desc { 
    font-size: 1.1rem; 
    opacity: 0.8; 
    color: #e5e7eb; 
    line-height: 1.5;
}

/* 메뉴 카드 호버 애니메이션 강화 */
.menu-buttons { perspective: 800px; }
.menu-btn {
    position: relative;
    overflow: hidden;
    transform-style: preserve-3d;
    transition: transform .25s cubic-bezier(.2,.8,.2,1), box-shadow .25s ease, border-color .25s ease, background .25s ease;
}
.menu-btn:hover {
    transform: translateY(-8px) scale(1.03) rotateX(2deg);
    box-shadow: 0 14px 30px rgba(139, 94, 60, 0.25);
}
.menu-btn::before { /* Shimmer sweep */
    content: "";
    position: absolute;
    top: -150%;
    left: -50%;
    width: 50%;
    height: 400%;
    background: linear-gradient(120deg, rgba(255,255,255,0), rgba(255,255,255,.35), rgba(255,255,255,0));
    transform: rotate(25deg) translateX(-120%);
    opacity: 0;
    pointer-events: none;
}
.menu-btn:hover::before {
    animation: shimmer-sweep 900ms ease-out both;
    opacity: .85;
}
.menu-btn::after { /* Glow ring */
    content: "";
    position: absolute;
    inset: 0;
    border-radius: 15px;
    box-shadow: 0 0 0 0 rgba(139,94,60,0);
    transition: box-shadow .25s ease;
    pointer-events: none;
}
.menu-btn:hover::after {
    box-shadow: 0 0 0 2px rgba(139,94,60,.25), 0 10px 25px rgba(139,94,60,.25) inset;
}
.menu-icon { transition: transform .25s cubic-bezier(.2,.8,.2,1); will-change: transform; }
.menu-btn:hover .menu-icon { transform: translateY(-4px) scale(1.12); }

@keyframes shimmer-sweep {
    from { transform: rotate(25deg) translateX(-140%); }
    to { transform: rotate(25deg) translateX(320%); }
}

/* 반응형 디자인 - 다양한 화면 크기 대응 */
@media (max-width: 1200px) {
    .menu-buttons {
        max-width: 1000px;
        gap: 2rem;
    }
    
    .menu-btn {
        min-width: 280px;
        min-height: 220px;
        padding: 2rem 1.5rem;
    }
    
    .menu-icon {
        font-size: 3rem;
        margin-bottom: 0.8rem;
    }
    
    .menu-text {
        font-size: 1.3rem;
        margin-bottom: 0.6rem;
    }
    
    .menu-desc {
        font-size: 1rem;
    }
}

@media (max-width: 900px) {
    .menu-buttons {
        max-width: 800px;
        gap: 1.5rem;
    }
    
    .menu-btn {
        min-width: 240px;
        min-height: 200px;
        padding: 1.8rem 1.3rem;
    }
    
    .menu-icon {
        font-size: 2.8rem;
        margin-bottom: 0.7rem;
    }
    
    .menu-text {
        font-size: 1.2rem;
        margin-bottom: 0.5rem;
    }
    
    .menu-desc {
        font-size: 0.95rem;
    }
}

@media (max-width: 768px) {
    .menu-buttons {
        flex-direction: column;
        max-width: 500px;
        gap: 1.5rem;
    }
    
    .menu-btn {
        flex: none;
        padding: 1.5rem;
        min-height: auto;
        min-width: auto;
        width: 100%;
    }
    
    .menu-icon {
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
    }
    
    .menu-text {
        font-size: 1.1rem;
    }
    
    .menu-desc {
        font-size: 0.9rem;
    }
}

@media (max-width: 480px) {
    .menu-buttons {
        max-width: 100%;
        padding: 0 1rem;
        gap: 1rem;
    }
    
    .menu-btn {
        padding: 1.2rem;
    }
    
    .menu-icon {
        font-size: 2.2rem;
        margin-bottom: 0.4rem;
    }
    
    .menu-text {
        font-size: 1rem;
        margin-bottom: 0.4rem;
    }
    
    .menu-desc {
        font-size: 0.85rem;
    }
}

/* Navy 테마 가독성: 갈색 텍스트/아이콘을 어두운 배경 위에서는 흰색으로 */
.intro-content, .intro-title, .intro-subtitle { color: #ffffff !important; }
.library-icon, .search-icon { color: #ffffff !important; filter: drop-shadow(0 4px 10px rgba(0,0,0,0.35)); }
.scroll-indicator { color: #ffffff !important; background: rgba(255,255,255,0.12); border-color: rgba(255,255,255,0.25); }
.middle-content, .middle-title, .middle-subtitle { color: #ffffff !important; }

.middle-indicator {
    position: absolute;
    bottom: 4rem;
    left: 50%;
    transform: translateX(-50%);
    text-align: center;
    color: #8b5e3c;
    animation: fadeIn 0.8s ease 1.5s both;
    z-index: 10;
    background: rgba(139, 94, 60, 0.1);
    padding: 1rem 1.5rem;
    border-radius: 25px;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(139, 94, 60, 0.2);
}

.middle-indicator span {
    display: block;
    font-size: 0.9rem;
    margin-bottom: 0.5rem;
}

.middle-arrow {
    font-size: 1.5rem;
    animation: bounce 1.5s infinite;
}

/* 장르별 한눈에 보기 페이지 */
.genre-page { position: relative; width: 100%; min-height: 100vh; background: transparent; }

.genre-content { max-width: 1200px; margin: 0 auto; padding: 2rem; color: #111827; }

/* 장르 페이지 상단 소개 박스 흰색 카드화 */
.genre-page .info-section { background:#ffffff; border:1px solid rgba(0,0,0,0.08); border-radius:15px; padding:2rem; box-shadow:0 4px 12px rgba(0,0,0,0.08); }
.genre-page .info-section h2 { color:#111827 }
.genre-page .info-section p { color:#374151 }

.genre-header { display: flex; align-items: center; gap: 1rem; margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 2px solid #3b82f6; }
.genre-header h1 { color: #ffffff; }

.genre-header h1 {
    font-size: 2rem;
    margin: 0;
}

.genre-main {
    display: flex;
    flex-direction: column;
    gap: 2rem;
}

.genre-tabs-container { background: #ffffff; border-radius: 15px; padding: 1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }

.genre-tabs {
    display: flex;
    flex-wrap: wrap;
    gap: 0.8rem;
    justify-content: center;
}

.genre-tab { padding: 0.8rem 1.2rem; border: 2px solid #3b82f6; background: #ffffff; color: #2563eb; border-radius: 25px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; font-size: 0.9rem; }

.genre-tab:hover { background: #3b82f6; color: #ffffff; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(59,130,246,0.35); }

.genre-tab.active { background: #2563eb; color: #ffffff; box-shadow: 0 4px 12px rgba(59,130,246,0.35); border-color: transparent; }



/* 새로운 랭킹 시스템 스타일 */
.advanced-rankings {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.5rem;
    margin-bottom: 1rem;
    max-width: 100%;
}

.ranking-category { 
    background: #ffffff; 
    border-radius: 15px; 
    padding: 1.5rem; 
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); 
    width: 100%;
    max-width: 100%;
}

.total-ranking {
    margin-bottom: 1.5rem;
    border: 2px solid #3b82f6;
    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
}

.ranking-category h3 { color: #111827; font-size: 1.2rem; margin-bottom: 1rem; text-align: center; border-bottom: 2px solid #3b82f6; padding-bottom: 0.5rem; }

.ranking-tabs {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 1rem;
    justify-content: center;
}

.ranking-tab { padding: 0.4rem 0.8rem; border: 1px solid #3b82f6; background: #ffffff; color: #2563eb; border-radius: 20px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; font-size: 0.75rem; min-width: 60px; text-align: center; }

.ranking-tab:hover { background: #3b82f6; color: #ffffff; transform: translateY(-1px); }

.ranking-tab.active { background: #2563eb; color: #ffffff; box-shadow: 0 2px 8px rgba(59, 130, 246, 0.35); border-color: transparent; }

.ranking-list {
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
    max-height: 200px;
    overflow-y: auto;
}

.ranking-list::-webkit-scrollbar { width: 6px; }
.ranking-list::-webkit-scrollbar-track { background: #dbeafe; border-radius: 3px; }
.ranking-list::-webkit-scrollbar-thumb { background: #3b82f6; border-radius: 3px; }

.ranking-item { display: flex; align-items: center; gap: 0.8rem; padding: 0.8rem; background: rgba(255,255,255,0.06); border-radius: 8px; border-left: 3px solid rgba(59,130,246,0.8); transition: all 0.3s ease; }

.ranking-item:hover { background: rgba(59,130,246,0.12); transform: translateX(3px); }

.ranking-number { font-size: 1rem; font-weight: bold; color: #ffffff; min-width: 30px; text-align: center; }

.ranking-info {
    flex: 1;
}

.ranking-library-name { font-weight: 600; color: #ffffff; margin-bottom: 0.2rem; font-size: 0.9rem; }

.ranking-detail { font-size: 0.8rem; color: #e5e7eb; }

/* 어린이 페이지 */
.children-page { position: relative; width: 100%; min-height: 100vh; background: transparent; }

.children-page.hidden {
    transform: translateY(-100%);
    opacity: 0;
    pointer-events: none;
}

.children-content { max-width: 1000px; margin: 0 auto; padding: 2rem; color: #e5e7eb; }
.children-content h2, .children-content h3 { color:#e5e7eb }
.children-content p, .children-content li, .children-content .stat-label { color:#e5e7eb }
.children-content a { color:#93c5fd }

.children-header {
    display: flex;
    align-items: center;
    margin-bottom: 2rem;
    gap: 1rem;
}

.back-btn {
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255,255,255,0.3);
    color: #ffffff;
    padding: 0.5rem 1rem;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.back-btn:hover {
    background: rgba(255, 255, 255, 0.18);
    border-color: rgba(255,255,255,0.6);
}

.children-header h1 { font-size: 2rem; margin: 0; color: #ffffff; }

.info-section { background: #ffffff; padding: 2rem; border-radius: 15px; margin-bottom: 2rem; border: 1px solid rgba(0,0,0,0.08); box-shadow: 0 4px 12px rgba(0,0,0,0.08); color:#2563eb }
.children-main .info-section h2 { color:#0f172a }
.children-main .info-section p { color:#0f172a }

.children-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin-bottom: 2rem;
}

.children-stats .stat-card { background: #ffffff; padding: 1.5rem; border-radius: 12px; text-align: center; border: 1px solid rgba(0,0,0,0.08); box-shadow: 0 4px 12px rgba(0,0,0,0.08); color:#2563eb }

.stat-number { font-size: 2rem; font-weight: bold; color: #2563eb; margin-bottom: 0.5rem; }

.stat-label {
    font-size: 0.9rem;
    opacity: 0.8;
}

/* 어린이 통계 카드 라벨을 파란색으로 가독성 높임 */
.children-stats .stat-label { color: #2563eb; opacity: 0.9; }

/* 어린이 도서관 목록 섹션 */
.children-library-section { background: #ffffff; border-radius: 15px; padding: 1.5rem; border: 1px solid rgba(0,0,0,0.08); margin-bottom: 2rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08); color:#2563eb }

.children-library-section h3 { margin-top: 0; margin-bottom: 1rem; color: #0f172a; font-size: 1.1rem; }
.children-library-section .library-name { color: #0f172a; }
.children-library-section .library-info { color: #1f2937; }
.children-library-section .library-seats { color: #1f2937; }

.children-library-list { 
    margin-top: 0.5rem; 
    max-height: 330px; /* 5위까지만 보이도록 높이 제한 */
    overflow-y: auto; /* 세로 스크롤 활성화 */
    padding-right: 8px; /* 스크롤바 공간 확보 */
}

/* 간단한 어린이 도서관 목록 아이템 */
.children-library-simple-item { display: flex; align-items: center; padding: 0.8rem 1rem; margin: 0.5rem 0; background: #ffffff; border-radius: 10px; border: 1px solid rgba(0,0,0,0.08); cursor: pointer; transition: all 0.3s ease; gap: 1rem; }

.children-library-simple-item:hover { background: rgba(148,163,184,0.22); border-color: rgba(148,163,184,0.55); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.35); }

.library-rank { background: linear-gradient(135deg, #3b82f6, #60a5fa); color: #ffffff; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: bold; flex-shrink: 0; box-shadow: 0 2px 6px rgba(59,130,246,0.3); }

.library-name { flex: 1; font-weight: 600; color: #ffffff; font-size: 0.95rem; }

.library-seats { color: #1f2937; font-size: 0.85rem; font-weight: 500; flex-shrink: 0; }

/* 어린이 인쇄자료 장르별 대출 랭킹 섹션 */
.children-genre-section { background: #ffffff; border-radius: 15px; padding: 1.5rem; border: 1px solid rgba(0,0,0,0.08); margin-bottom: 2rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08); color:#2563eb }

.children-genre-section h3 { margin-top: 0; margin-bottom: 1rem; color: #0f172a; font-size: 1.1rem; }

/* 장르 탭 스타일 */
.genre-tabs { display:flex; flex-wrap:wrap; gap:.5rem; margin-bottom:1.5rem; padding-bottom:1rem; border-bottom:1px solid #3b82f6 }

.genre-tab { background:#ffffff; border:1px solid #3b82f6; color:#2563eb; padding:.5rem 1rem; border-radius:20px; cursor:pointer; transition:all .3s ease; font-size:.85rem; font-weight:500 }

.genre-tab:hover { background:#3b82f6; color:#ffffff; border-color:#3b82f6; transform:translateY(-1px) }

.genre-tab.active { background:#2563eb; color:#ffffff; border-color:#2563eb; box-shadow:0 2px 8px rgba(59,130,246,.3) }

/* 장르 랭킹 리스트 */
.genre-ranking-list {
    max-height: 300px; /* 3위까지만 보이도록 높이 제한 */
    overflow-y: auto;
    padding-right: 8px; /* 스크롤바 공간 확보 */
}

.genre-ranking-item { display:flex; flex-direction:column; gap:.5rem; padding:1rem; margin:.5rem 0; background:#ffffff; border-radius:10px; border:1px solid rgba(0,0,0,.08); transition:all .3s ease }

.genre-ranking-item:hover { background:#ffffff; border-color:#60a5fa; transform:translateY(-1px); box-shadow:0 4px 12px rgba(59,130,246,.2) }

.ranking-info {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.rank-number {
    background: linear-gradient(135deg, #3b82f6, #60a5fa);
    color: #ffffff;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.85rem;
    font-weight: bold;
    flex-shrink: 0;
    box-shadow: 0 2px 6px rgba(59, 130, 246, 0.3);
}

.library-info {
    flex: 1;
}

.children-genre-section .library-info .library-name {
    font-weight: 600;
    color: #0f172a;
    font-size: 0.95rem;
    margin-bottom: 0.3rem;
}

.checkout-stats {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.checkout-count {
    color: #2563eb;
    font-weight: 600;
    font-size: 0.9rem;
}

.percentage {
    color: #666;
    font-size: 0.8rem;
    font-style: italic;
}

/* 랭킹 바 */
.ranking-bar {
    height: 6px;
    background: rgba(59, 130, 246, 0.12);
    border-radius: 3px;
    overflow: hidden;
}

.bar-fill {
    height: 100%;
    background: linear-gradient(90deg, #3b82f6, #60a5fa);
    border-radius: 3px;
    transition: width 0.8s ease;
    box-shadow: 0 1px 3px rgba(59, 130, 246, 0.3);
}

.ranking-number {
    font-size: 1rem;
    font-weight: bold;
    color: #2563eb;
    min-width: 30px;
    text-align: center;
}

.ranking-library-name {
    font-weight: 600;
    color: #111827;
    margin-bottom: 0.2rem;
    font-size: 0.9rem;
}

.ranking-detail {
    font-size: 0.8rem;
    color: #374151;
}

.no-data {
    text-align: center;
    color: #8b5e3c;
    font-style: italic;
    padding: 2rem;
    opacity: 0.7;
}

/* 어린이 전자자료 장르별 대출 랭킹 섹션 */
.children-electronic-section { background: #ffffff; border-radius: 15px; padding: 1.5rem; border: 1px solid rgba(0,0,0,0.08); margin-bottom: 2rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08); color:#2563eb }

.children-electronic-section h3 { margin-top: 0; margin-bottom: 1rem; color: #0f172a; font-size: 1.1rem; }

/* 전자자료 탭 스타일 */
.electronic-tabs {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid rgba(139, 94, 60, 0.2);
}

.electronic-tab {
    background: rgba(255, 255, 255, 0.8);
    border: 1px solid rgba(59, 130, 246, 0.3);
    color: #1e40af;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.85rem;
    font-weight: 500;
}

.electronic-tab:hover {
    background: rgba(59, 130, 246, 0.1);
    border-color: #3b82f6;
    transform: translateY(-1px);
}

.electronic-tab.active {
    background: #3b82f6;
    color: white;
    border-color: #3b82f6;
    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
}

/* 전자자료 랭킹 리스트 */
.electronic-ranking-list {
    max-height: 400px;
    overflow-y: auto;
}

.electronic-ranking-item {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    padding: 1rem;
    margin: 0.5rem 0;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 10px;
    border: 1px solid rgba(59, 130, 246, 0.2);
    transition: all 0.3s ease;
}

/* 전자자료 랭킹: 도서관 이름은 흑색으로 가독성 확보 */
.children-electronic-section .library-info .library-name { color: #0f172a; }

.electronic-ranking-item:hover {
    background: rgba(255, 255, 255, 1);
    border-color: #3b82f6;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
}

.electronic-rank { background: linear-gradient(135deg, #3b82f6, #60a5fa); color: #ffffff; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.85rem; font-weight: bold; flex-shrink: 0; box-shadow: 0 2px 6px rgba(59, 130, 246, 0.3); }

/* 전자자료 랭킹 바 */
.electronic-bar {
    background: linear-gradient(90deg, #3b82f6, #60a5fa);
    border-radius: 3px;
    transition: width 0.8s ease;
    box-shadow: 0 1px 3px rgba(59, 130, 246, 0.3);
}

/* 어린이 지도 섹션 */
.children-map-section { background: #ffffff; border-radius: 15px; padding: 1.5rem; border: 1px solid rgba(0,0,0,0.08); box-shadow: 0 4px 12px rgba(0,0,0,0.08); color:#2563eb }

.children-map-section h3 { margin-top: 0; margin-bottom: 1rem; color: #0f172a; font-size: 1.1rem; }

.children-map-container { margin-top: 0.5rem; }

#childrenMapContainer { height: 500px; background: #0f172a; border-radius: 8px; border: 1px solid rgba(255,255,255,0.2); }



/* 어린이 페이지 카카오 지도 스타일 */
.kakao-info-window {
    padding: 10px;
    min-width: 200px;
    font-family: inherit;
}

.children-kakao-info .info-title {
    font-size: 1.1rem;
    font-weight: bold;
    color: #8b5e3c;
    margin-bottom: 8px;
    border-bottom: 1px solid rgba(139, 94, 60, 0.2);
    padding-bottom: 5px;
}

.children-kakao-info .info-content p {
    margin: 3px 0;
    font-size: 0.9rem;
    color: #5a3d26;
}

.children-kakao-info .info-content strong {
    color: #8b5e3c;
}

/* 카카오 지도 호버 팝업 스타일 */
.kakao-hover-popup {
    background: rgba(248, 241, 228, 0.95);
    border: 2px solid #8b5e3c;
    border-radius: 8px;
    padding: 8px 12px;
    box-shadow: 0 4px 12px rgba(139, 94, 60, 0.3);
    backdrop-filter: blur(10px);
    font-family: inherit;
}

.kakao-hover-popup .popup-title {
    font-weight: bold;
    color: #8b5e3c;
    margin-bottom: 4px;
    font-size: 0.95rem;
}

.kakao-hover-popup .popup-meta {
    font-size: 0.85rem;
    color: #5a3d26;
    line-height: 1.3;
}

/* 어린이 도서관 모달 스타일 */
.children-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
    backdrop-filter: blur(5px);
}

.children-modal-overlay.show {
    opacity: 1;
}

.children-modal-content {
    background: rgba(15,23,42,0.9);
    border-radius: 15px;
    max-width: 500px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.45);
    border: 2px solid rgba(148, 163, 184, 0.35);
    transform: scale(0.9);
    transition: transform 0.3s ease;
}

.children-modal-overlay.show .children-modal-content {
    transform: scale(1);
}

.children-modal-header { display:flex; justify-content:space-between; align-items:center; padding:1.5rem; border-bottom:1px solid rgba(148, 163, 184, 0.35) }

.children-modal-header h3 { margin:0; color:#ffffff; font-size:1.3rem }

.children-modal-close { background:none; border:none; font-size:1.5rem; color:#ffffff; cursor:pointer; padding:0; width:30px; height:30px; border-radius:50%; display:flex; align-items:center; justify-content:center; transition:all .3s ease }

.children-modal-close:hover { background: rgba(255,255,255,0.12); transform: rotate(90deg) }

.children-modal-body {
    padding: 1.5rem;
}

.children-modal-info .info-row { display:flex; justify-content:space-between; align-items:flex-start; padding:.8rem 0; border-bottom:1px solid rgba(148,163,184,0.25) }

.children-modal-info .info-row:last-child {
    border-bottom: none;
}

.info-label { font-weight:600; color:#e5e7eb; min-width:100px; font-size:.9rem }

.info-value { color:#e5e7eb; text-align:right; flex:1; font-size:.9rem; line-height:1.4 }

.container { 
    display: flex; 
    flex-direction: column; 
    height: 100vh; 
    opacity: 0;
    transition: opacity 0.3s ease;
}

.container.show {
    opacity: 1;
}

/* 헤더 (페이드다운) */
.header { background: transparent; color: var(--text); padding: 1rem 2rem; border-bottom: 1px solid rgba(0,0,0,0.06); animation: fadeDown .4s ease both; }

.header-top {
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    margin-bottom: 0.75rem;
}

.main-back-btn {
    position: absolute;
    left: 0;
    background: rgba(255, 255, 255, 0.8);
    border: 1px solid rgba(139, 94, 60, 0.3);
    color: #8b5e3c;
    padding: 0.5rem 1rem;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.9rem;
}

.main-back-btn:hover {
    background: rgba(255, 255, 255, 1);
    border-color: #8b5e3c;
    transform: translateX(-3px);
}

.header h1 { font-size: 1.75rem; margin: 0; text-align: center; color: var(--button); }

.search-container { display: flex; gap: 0.5rem; max-width: 560px; margin: 0 auto; }
.search-container input { flex: 1; padding: 0.75rem 1rem; border: 1px solid var(--border); border-radius: 10px; font-size: 1rem; outline: none; background: #fff; }
.search-container button { padding: 0.75rem 1.25rem; background-color: var(--button); color: #111827; border: none; border-radius: 10px; cursor: pointer; font-size: 1rem; transition: transform .08s ease, background-color .2s ease; }
.search-container button:hover { background-color: var(--button-dark); }
.search-container button:active { transform: translateY(1px); }

/* 카테고리 바 (페이드인) */
.category-bar { max-width: 1200px; margin: 0.75rem auto 0; display: grid; grid-template-columns: repeat(4, minmax(0, 1fr)); gap: 0.75rem; }
.category-group { background: #ffffff; border: 1px solid var(--border); border-radius: 12px; padding: 0.75rem; animation: fadeIn .4s ease both; min-width: 0; }
.category-group:nth-child(1) { animation-delay: .05s; }
.category-group:nth-child(2) { animation-delay: .12s; }
.category-group:nth-child(3) { animation-delay: .18s; }
.category-title { font-size: 0.9rem; color: #0f172a; margin-bottom: 0.5rem; }
.category-chips#studyCategoryChips .chip.active{background:#3b82f6;border-color:#3b82f6;color:#ffffff}
.category-chips { display: flex; flex-wrap: wrap; gap: 0.5rem; }
.chip { padding: 0.45rem 0.75rem; font-size: 0.9rem; border-radius: 999px; border: 1px solid #3b82f6; background: #fff; color: #2563eb; cursor: pointer; transition: transform .12s ease, background .2s ease, border-color .2s ease, color .2s ease; }
.chip:hover { background: #eff6ff; border-color: #2563eb; color: #1e40af; }
.chip:active { transform: scale(.98); }
.chip.active { background: #3b82f6; border-color: #3b82f6; color: #ffffff; animation: pop .18s ease; }

/* 2단계 카테고리 스타일 */
.category-level-1 {
    margin-bottom: 0.5rem;
}

.category-level-2 {
    margin-top: 0.5rem;
    padding-top: 0.5rem;
    border-top: 1px solid rgba(139, 94, 60, 0.2);
    transition: all 0.3s ease;
}

.primary-chip {
    background: #ffffff;
    color: #2563eb;
    border-color: #3b82f6;
    font-weight: 400;
    font-size: 0.9rem;
}

.primary-chip:hover {
    background: #eff6ff;
    border-color: #2563eb;
    color: #1e40af;
}

.primary-chip.active {
    background: #3b82f6;
    border-color: #3b82f6;
    color: #ffffff;
}

.secondary-chip {
    font-size: 0.85rem;
    padding: 0.35rem 0.6rem;
}

.secondary-chip.active {
    background: #3b82f6;
    border-color: #3b82f6;
    color: #ffffff;
}

/* 메인 콘텐츠 */
.main-content { display: flex; flex: 1; overflow: hidden; height: calc(100vh - 180px); min-height: calc(100vh - 180px); }

/* 지도 컨테이너 (임시) */
.map-container { flex: 2; position: relative; background: transparent; padding: 1rem; height: 100%; min-height: 520px; }
#map { width: 100%; height: 100%; min-height: 520px; background: #0f172a; border: 1px solid rgba(255,255,255,0.18); border-radius: 16px; overflow: hidden; box-shadow: 0 10px 28px rgba(0,0,0,0.35), inset 0 0 0 1px rgba(255,255,255,0.06); }
.map-empty-msg { color: #e5e7eb; font-size: 0.95rem; background: rgba(255,255,255,0.08); padding: 0.5rem 0.75rem; border: 1px solid rgba(255,255,255,0.18); border-radius: 8px; }

/* 사이드바 */
.sidebar { flex: 1; background: transparent; overflow-y: visible; max-width: 420px; min-width: 300px; padding: 0 0; box-sizing: border-box; max-height: 100%; }
.sidebar-card{background:#ffffff;border:1px solid rgba(0,0,0,0.08);border-radius:16px;box-shadow:0 10px 28px rgba(0,0,0,0.12);padding:1rem 1rem 1rem;position:relative; max-height: calc(100vh - 200px); overflow-y: auto}
.sidebar-card .sidebar-header{position:sticky;top:0;z-index:5;background:linear-gradient(180deg,#ffffff,rgba(255,255,255,0.85) 70%, rgba(255,255,255,0))}
.sidebar-card .filter-section-title{color:#0f172a}
.sidebar-card .advanced-filters{z-index:auto}
.sidebar-card .library-list-wrap{margin-top:1rem}
/* 사이드바 헤더/필터 정리 */
.sidebar-header{padding:1rem;border-bottom:1px solid rgba(255,255,255,0.18);background:transparent;position:sticky;top:0;z-index:5;margin:0;line-height:1.6;background:linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0))}
.filter-section-title{margin:1rem 0 .6rem;color:#0f172a;font-size:.9rem;letter-spacing:.02em}
.sidebar-header select, .sort-select { color:#0f172a; background:#ffffff; border:1px solid var(--border) }
.advanced-filters{margin:.75rem 0 1.5rem;display:grid;grid-template-columns:1fr;gap:.9rem;overflow: visible; position: relative; z-index: auto;}
.advanced-filters .af-row{display:flex;flex-wrap:wrap;align-items:center;gap:.75rem;background:#ffffff;border:1px solid var(--border);border-radius:12px;padding:1rem 1.1rem}
.advanced-filters label{font-size:.95rem;color:#0f172a;min-width:140px;line-height:1.4}
.advanced-filters input[type=number],
.filter-controls select,
.sort-select,
.mini-select{padding:.7rem .8rem;border:1px solid var(--border);border-radius:10px;background:#ffffff;color:#111827;min-height:44px}
.advanced-filters input[type=number]{flex:1;min-width:160px}
.advanced-filters .mini-select{flex:1;min-width:180px}
.checkbox-label{display:flex;align-items:center;gap:.45rem}
.sidebar-header .filter-controls{margin-top:.55rem;margin-bottom:.8rem;display:flex;gap:.6rem .6rem;flex-wrap:wrap}
.sidebar-header .age-filter-section{margin-top:.8rem;padding-top:.8rem;border-top:1px solid rgba(0,0,0,0.08)}
.sidebar-header .age-select{padding:.7rem .8rem;border:1px solid var(--border);border-radius:10px;background:#ffffff;color:#111827;min-height:44px;width:100%}

/* 카드 느낌 강화 */
.sidebar{background:transparent}
.advanced-filters,.stats-bar{background:transparent}
.stats-bar{margin:1rem 0 1.25rem;display:grid;grid-template-columns:repeat(2,1fr);gap:1rem; position: relative; z-index: 3}
.stat-card{background:#ffffff;border:1px solid var(--border);border-radius:12px;padding:1rem;box-shadow:0 1px 2px rgba(0,0,0,.06)}

/* 토글 스위치 */
.switch{position:relative;display:inline-block;width:44px;height:24px}
.switch input{opacity:0;width:0;height:0}
.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#e5e7eb;transition:.2s;border-radius:999px}
.slider:before{position:absolute;content:"";height:18px;width:18px;left:3px;top:3px;background:white;transition:.2s;border-radius:50%}
.switch input:checked + .slider{background:#b38a67}
.switch input:checked + .slider:before{transform:translateX(20px)}
.switch-label{font-size:.9rem;color:#0f172a}

/* 도서관 목록 */
.library-list { position: relative; padding: 1rem; margin-top: 1rem; background: transparent; border: none; border-radius: 0; box-shadow: none; overflow: visible; }
.library-list-wrap { position: relative; margin-top: 1rem; background: #ffffff; border: 1px solid rgba(0,0,0,0.08); border-radius: 16px; box-shadow: 0 10px 28px rgba(0,0,0,0.12); overflow: hidden; padding: 0.5rem; z-index: auto; }
.library-item { padding: 1rem 1.2rem; margin-bottom: 0.75rem; background: #ffffff; border: 1px solid rgba(0,0,0,0.08); border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); cursor: pointer; transition: background-color .2s, box-shadow .2s; opacity: 1; transform: none; color: #111827; }
.library-item:hover { background-color: rgba(59,130,246,0.06); box-shadow: inset 0 -1px 0 rgba(0,0,0,0.06); }
.library-item.selected { background-color: rgba(59,130,246,0.08); border-left: 4px solid #60a5fa; }
.library-name { font-weight: 700; color: #ffffff; margin-bottom: 0.5rem; }
.library-info { font-size: 0.92rem; color: #e5e7eb; line-height: 1.5; }
.library-item.appear { animation: fadeInUp .35s ease forwards; }
.library-name { font-weight: 700; color: #111827; margin-bottom: 0.5rem; }
.library-info { font-size: 0.92rem; color: #4b5563; line-height: 1.5; }
.library-status { display: inline-block; padding: 0.25rem 0.5rem; background-color: #ecfdf5; color: #065f46; border: 1px solid #d1fae5; border-radius: 999px; font-size: 0.8rem; margin-top: 0.5rem; animation: pulseGlow 1.8s ease-in-out infinite; }

/* 모달 (트랜지션) */
.modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(15, 23, 42, 0.4); }
.modal-content { background-color: var(--surface); margin: 5% auto; padding: 2rem; border-radius: 12px; width: 80%; max-width: 640px; max-height: 80vh; overflow-y: auto; position: relative; border: 1px solid var(--border); transform: scale(.96); opacity: 0; transition: transform .2s ease, opacity .2s ease; }
.modal-content.show { transform: scale(1); opacity: 1; }
.close { position: absolute; right: 1rem; top: 1rem; font-size: 2rem; cursor: pointer; color: #9ca3af; }
.close:hover { color: #111827; }

/* 상세 정보 */
.library-detail { margin-top: 0.25rem; }
.detail-section { margin-bottom: 1.25rem; padding: 1rem; background-color: #f9fafb; border-radius: 8px; border: 1px solid var(--border); }
.detail-section h4 { color: #374151; margin-bottom: 0.5rem; border-bottom: 2px solid #e5e7eb; padding-bottom: 0.5rem; }
.detail-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 0.75rem; }
.detail-item { background: #fff; padding: 1rem; border-radius: 8px; border: 1px solid #e9ecef; }
.detail-label { font-weight: 700; color: #374151; margin-bottom: 0.25rem; }
.detail-value { color: #4b5563; }

/* 반응형 */
@media (max-width: 768px) {
    .main-content { flex-direction: column; }
    .sidebar { max-width: none; min-width: auto; max-height: 320px; }
    .header h1 { font-size: 1.4rem; }
    .search-container { flex-direction: column; }
    .category-bar { grid-template-columns: 1fr; }
    .modal-content { width: 95%; margin: 10% auto; }
    
    /* 메인 돌아가기 버튼 모바일 최적화 */
    .header-top {
        flex-direction: column;
        gap: 0.5rem;
        align-items: flex-start;
    }
    
    .main-back-btn {
        position: static;
        align-self: flex-start;
        font-size: 0.8rem;
        padding: 0.4rem 0.8rem;
    }
    
    .header h1 {
        align-self: center;
    }
    
    /* 2단계 카테고리 모바일 최적화 */
    .category-level-2 {
        margin-top: 0.75rem;
        padding-top: 0.75rem;
    }
    
    /* 어린이 페이지 모바일 최적화 */
    .children-library-section {
        margin-bottom: 1.5rem;
    }
    
    #childrenMapContainer {
        height: 350px;
    }
    
    /* 어린이 목록 모바일 최적화 */
    .children-library-simple-item {
        padding: 0.6rem 0.8rem;
        gap: 0.8rem;
    }
    
    .library-name {
        font-size: 0.9rem;
    }
    
    .library-seats {
        font-size: 0.8rem;
    }
    
    /* 어린이 모달 모바일 최적화 */
    .children-modal-content {
        width: 95%;
        margin: 1rem;
    }
    
    .children-modal-header {
        padding: 1rem;
    }
    
    .children-modal-body {
        padding: 1rem;
    }
    
    .children-modal-info .info-row {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.3rem;
    }
    
    .info-value {
        text-align: left;
    }
    
    /* 장르 랭킹 모바일 최적화 */
    .children-genre-section {
        margin-bottom: 1.5rem;
    }
    
    .genre-tabs {
        gap: 0.3rem;
        margin-bottom: 1rem;
    }
    
    .genre-tab {
        padding: 0.4rem 0.8rem;
        font-size: 0.8rem;
    }
    
    .genre-ranking-item {
        padding: 0.8rem;
    }
    
    .ranking-info {
    
    .rank-number {
        width: 24px;
        height: 24px;
        font-size: 0.8rem;
    }
    
    .library-info .library-name {
        font-size: 0.9rem;
    }
    
    .checkout-count {
        font-size: 0.85rem;
    }
    
    .percentage {
        font-size: 0.75rem;
    }
    
    /* 전자자료 랭킹 모바일 최적화 */
    .children-electronic-section {
        margin-bottom: 1.5rem;
    }
    
    .electronic-tabs {
        gap: 0.3rem;
        margin-bottom: 1rem;
    }
    
    .electronic-tab {
        padding: 0.4rem 0.8rem;
        font-size: 0.8rem;
    }
    
    .electronic-ranking-item {
        padding: 0.8rem;
    }
    
    .electronic-rank {
        width: 24px;
        height: 24px;
        font-size: 0.8rem;
    }
    
    .primary-chip {
        font-size: 0.8rem;
        padding: 0.3rem 0.5rem;
    }
    
    .secondary-chip {
        font-size: 0.75rem;
        padding: 0.25rem 0.45rem;
    }
    
    /* 인트로 화면 모바일 최적화 */
    .intro-content {
        padding: 1rem;
    }
    
    .intro-title {
        font-size: 1.8rem;
        margin-bottom: 1rem;
    }
    
    .intro-subtitle {
        font-size: 1rem;
        margin-bottom: 4rem;
    }
    
    .library-icon {
        width: 5rem;
        height: 5rem;
    }
    
    .scroll-indicator {
        bottom: 2rem;
        padding: 0.8rem 1.2rem;
    }
    
    .scroll-indicator span {
        font-size: 0.8rem;
    }
    
    /* 중간 화면 모바일 최적화 */
    .middle-content {
        padding: 1rem;
    }
    
    .middle-title {
        font-size: 1.8rem;
        margin-bottom: 1rem;
    }
    
    .middle-subtitle {
        font-size: 1rem;
        margin-bottom: 4rem;
    }
    
    /* 장르 페이지 모바일 최적화 */
    .genre-visualization {
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }
    
    .genre-tabs {
        gap: 0.5rem;
    }
    
    .genre-tab {
        padding: 0.6rem 1rem;
        font-size: 0.8rem;
    }
    
    /* 새로운 랭킹 시스템 모바일 최적화 */
    .advanced-rankings {
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }
    
    .ranking-category {
        padding: 1rem;
    }
    
    .ranking-category h3 {
        font-size: 1.1rem;
    }
    
    .ranking-tabs {
        gap: 0.3rem;
    }
    
    .ranking-tab {
        padding: 0.4rem 0.8rem;
        font-size: 0.75rem;
    }
    
    .ranking-list {
        max-height: 150px;
    }
    
    .ranking-item {
        padding: 0.6rem;
    }
    
    .ranking-number {
        font-size: 0.9rem;
        min-width: 25px;
    }
    
    .ranking-library-name {
        font-size: 0.8rem;
    }
    
    .ranking-detail {
        font-size: 0.7rem;
    }
    
    .search-icon {
        width: 5rem;
        height: 5rem;
    }
    
    .middle-indicator {
        bottom: 2rem;
        padding: 0.8rem 1.2rem;
    }
    
    .middle-indicator span {
        font-size: 0.8rem;
    }
}

/* 모션 최소화 환경 지원 */
@media (prefers-reduced-motion: reduce) {
  .header, .category-group, .library-item.appear { animation: none; }
  .modal-content { transition: none; }
  .library-status { animation: none; }
  
  /* 인트로 화면 애니메이션 비활성화 */
  .intro-content, .intro-logo, .intro-title, .intro-subtitle, .scroll-indicator, .scroll-arrow {
    animation: none !important;
  }
  
  .intro-screen {
    transition: opacity 0.3s ease;
  }
  
  /* 중간 화면 애니메이션 비활성화 */
  .middle-content, .middle-logo, .middle-title, .middle-subtitle, .middle-indicator, .middle-arrow {
    animation: none !important;
  }
  
  .middle-screen {
    transition: opacity 0.3s ease;
  }
}

/* 로딩 스피너 */
.loading { display: inline-block; width: 20px; height: 20px; border: 3px solid #f3f3f3; border-top: 3px solid var(--primary); border-radius: 50%; animation: spin 1s linear infinite; }
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

/* 마커 관련 (미사용: 유지) */
.custom-marker { background-color: var(--primary); border-radius: 50%; border: 2px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
.custom-marker:hover { transform: scale(1.05); }

/* 키프레임 */
@keyframes fadeDown{from{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes fadeInUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
@keyframes pop{0%{transform:scale(1)}50%{transform:scale(1.06)}100%{transform:scale(1)}}
@keyframes pulseGlow{0%{box-shadow:0 0 0 0 rgba(16,185,129,.35)}70%{box-shadow:0 0 0 8px rgba(16,185,129,0)}100%{box-shadow:0 0 0 0 rgba(16,185,129,0)}}

/* 인트로 화면 애니메이션 키프레임 */
@keyframes slideInLeft {
    from {
        opacity: 0;
        transform: translateX(-50px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes slideInRight {
    from {
        opacity: 0;
        transform: translateX(50px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}



@keyframes bounce {
    0%, 20%, 50%, 80%, 100% {
        transform: translateY(0);
    }
    40% {
        transform: translateY(-10px);
    }
    60% {
        transform: translateY(-5px);
    }
}

/* 고급 필터 */
.advanced-filters{margin-top:.5rem;display:grid;grid-template-columns:1fr 1fr;gap:.5rem}
.advanced-filters .af-row{display:flex;align-items:center;gap:.5rem;background:#fff;border:1px solid var(--border);border-radius:8px;padding:.5rem}
.advanced-filters label{font-size:.85rem;color:#374151;white-space:nowrap}
.advanced-filters input[type=number]{flex:1;min-width:0;padding:.45rem .6rem;border:1px solid var(--border);border-radius:6px}
.checkbox-label{display:flex;align-items:center;gap:.4rem}
.mini-select{padding:.4rem .5rem;border:1px solid var(--border);border-radius:6px;background:#fff}

/* 통계 바 */
.stats-bar{margin-top:.75rem;display:grid;grid-template-columns:repeat(2,1fr);gap:.5rem}
.stat-card{background:#fff;border:1px solid var(--border);border-radius:10px;padding:.75rem}
.stat-title{font-size:.8rem;color:#6b7280}
.stat-value{font-weight:700;color:#111827;margin-top:.25rem}

/* 차트 섹션 */
.charts{margin-top:1rem;display:grid;grid-template-columns:1fr;gap:1rem}
.chart-group{background:#fff;border:1px solid var(--border);border-radius:10px;padding:1rem}
.chart-group h4{font-size:1rem;color:#374151;margin-bottom:.5rem}

@media (max-width:768px){
  .advanced-filters{grid-template-columns:1fr}
  .stats-bar{grid-template-columns:1fr}
}

/* 뷰 전환 */
.view-toggle{padding:.45rem .7rem;border:1px solid var(--border);background:#fff;border-radius:8px;cursor:pointer;transition:transform .08s ease, background-color .2s ease}
.view-toggle:active{transform:scale(.98)}

.library-list.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:.75rem;padding:.75rem}
.library-list.grid .library-item{background:#ffffff;border:1px solid rgba(0,0,0,0.08);border-radius:12px;color:#111827}
.library-list.grid .library-item:hover{background:#ffffff;box-shadow:0 6px 18px rgba(0,0,0,.12)}
.library-list.grid .library-item.selected{border-color:#60a5fa;box-shadow:0 0 0 2px rgba(96,165,250,.45) inset}
.library-list.grid .library-name{color:#ffffff}
.library-list.grid .library-info{color:#e5e7eb}
.library-list.grid .library-status{background:#ecfdf5;color:#065f46;border:1px solid #d1fae5}

/* 리스트 업데이트 페이드 */
.library-list.fade-enter .library-item{opacity:0;transform:translateY(8px)}
.library-list.fade-enter-active .library-item{opacity:1;transform:translateY(0);transition:opacity .25s ease, transform .25s ease}

/* 단어구름 */
.wordcloud{width:100%;height:260px;border:1px dashed var(--border);border-radius:8px;display:flex;align-items:center;justify-content:center}

/* 뷰 토글 버튼 우상단 고정 */
.view-toggle.pinned{position:absolute;right:.75rem;top:.75rem;padding:.45rem .7rem;border:1px solid rgba(0,0,0,0.08);background:#ffffff;border-radius:10px;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,.2);color:#0f172a;z-index:2}

/* 간격: 도서관 목록 제목 아래와 첫 컨트롤 사이 */
.sidebar-header h3{margin-bottom:1.1rem;color:#ffffff !important}
.sidebar-header .filter-controls{margin-top:.35rem;margin-bottom:.6rem;display:flex;gap:.9rem;flex-wrap:wrap}

/* 가로 스크롤 방지 */
.sidebar{overflow-x:hidden}
.advanced-filters{overflow-x:hidden}
.advanced-filters .af-row{flex-wrap:wrap}
.advanced-filters label{min-width:auto}
.advanced-filters input[type=number]{flex:1;min-width:120px}
.advanced-filters .mini-select{flex:1;min-width:160px}

/* 컨트롤 행 간격 보강 */
.control-row{margin-top:1.25rem}
/* 정렬 없음 셀렉트 아래 여백 추가 */
.sort-select{margin-bottom:.5rem}

/* 사이드바 내부 좌우 여백 확대 */
.sidebar{flex:1;background:var(--surface);border-left:1px solid var(--border);overflow-y:auto;max-width:420px;min-width:300px;padding:0 1.25rem 1.25rem;box-sizing:border-box}

/* 고급 필터 여백/간격 조정 */
.advanced-filters{margin-top:.25rem;display:grid;grid-template-columns:minmax(0,1fr) minmax(0,1fr);gap:1.25rem;overflow-x:hidden;padding:0 .25rem}
.advanced-filters .af-row{display:flex;flex-wrap:wrap;align-items:flex-start;gap:.6rem;background:#fff;border:1px solid var(--border);border-radius:12px;padding:1rem 1.1rem;overflow:hidden}
.advanced-filters .af-row label{flex:0 0 auto;min-width:140px}
.advanced-filters .af-row input[type=number]{flex:1 1 100%;min-width:0;width:100%}
.advanced-filters .af-row .mini-select{flex:1 1 100%;min-width:0;width:100%}
.checkbox-label{flex:0 0 auto;gap:.45rem}

/* 입력/셀렉트 높이와 상단 여백 통일 */
.advanced-filters input[type=number],
.mini-select{padding:.65rem .75rem;border:1px solid var(--border);border-radius:10px;background:#fff;min-height:44px;color:#111827}

/* 고급필터 박스/입력 흰색 보장 */
.sidebar .advanced-filters .af-row{background:#ffffff;border:1px solid var(--border)}

/* 그리드 간격과 좌우 여백 유지 */
.advanced-filters{margin-top:.25rem;display:grid;grid-template-columns:minmax(0,1fr) minmax(0,1fr);gap:1.25rem;overflow-x:hidden;padding:0 .25rem}

/* 통계/리스트 좌우 여백 맞추기 */
.stats-bar{margin:1rem 0 1rem;display:grid;grid-template-columns:repeat(2,1fr);gap:1.1rem;padding:0 .25rem}
.library-list{padding:0 .25rem}

/* D3 Simple Map */
#map.d3-map{background:linear-gradient(180deg,#fbfbfc 0%,#f7f8fa 100%);position:relative}
.d3-grid line{stroke:#e5e7eb;stroke-width:1}
.d3-boundary path{fill:#f8fafc;stroke:#cbd5e1;stroke-width:1.2}
.d3-marker{fill:#2563eb;stroke:#fff;stroke-width:2;cursor:pointer;filter:drop-shadow(0 1px 2px rgba(0,0,0,.15))}
.d3-marker:hover{fill:#1d4ed8}
.d3-marker.selected{fill:#8b5e3c}
/* 지하철 노선 스타일 */
.d3-subway path{fill:none;stroke:#94a3b8;stroke-width:1.5;opacity:.85}

/* Kakao CustomOverlay 이모지 마커 */
.ko-emoji{position:relative;line-height:1;user-select:none;transform:translate(-50%,-100%);filter:drop-shadow(0 1px 2px rgba(0,0,0,.25));pointer-events:auto;cursor:pointer}
.ko-emoji.selected{transform:translate(-50%,-100%) scale(1.08)}
.ko-emoji:hover{filter:drop-shadow(0 2px 4px rgba(0,0,0,.35))}

/* Kakao hover tooltip */
.ko-tooltip{position:relative;background:#111827;color:#fff;padding:.35rem .5rem;border-radius:6px;font-size:.8rem;white-space:nowrap;border:1px solid rgba(255,255,255,.15);pointer-events:none}
.ko-tooltip:after{content:"";position:absolute;left:50%;bottom:-6px;transform:translateX(-50%);border-width:6px 6px 0 6px;border-style:solid;border-color:#111827 transparent transparent transparent}

/* Kakao click popup */
.ko-popup{background:#fff;border:1px solid var(--border);border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,.12);padding:.6rem .75rem;min-width:240px;max-width:300px;pointer-events:auto}
.ko-popup .title{font-weight:700;color:#111827;margin-bottom:.25rem}
.ko-popup .meta{color:#6b7280;font-size:.85rem;margin-bottom:.5rem;line-height:1.4}
.ko-popup .actions{display:flex;gap:.5rem;justify-content:flex-end}
.ko-popup .btn{padding:.35rem .55rem;border:1px solid var(--border);background:#fff;border-radius:8px;cursor:pointer;font-size:.85rem}
.ko-popup .btn.primary{background:#8b5e3c;color:#fff;border-color:#8b5e3c}
}

.emoji-character {
    font-size: 28px;
    line-height: 1;
    animation-fill-mode: forwards;
    opacity: 0;
    transform: translateY(40px);
    pointer-events: none;
  }
  
@keyframes runAndStand {
    0% {
      opacity: 0;
      transform: translateY(40px) scale(0.8);
    }
    60% {
      opacity: 1;
      transform: translateY(-10px) scale(1.2);
    }
    100% {
      opacity: 1;
      transform: translateY(0px) scale(1);
    }
  }

  .character-wrapper {
    position: absolute;
    z-index: 999;
    will-change: transform;
  }
  
  .run-character img {
    animation: bounce-run 0.4s infinite;
  }
  
  .walk-character img {
    animation: bounce-walk 1s infinite;
  }
  
  @keyframes bounce-run {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-6px); }
  }
  
  @keyframes bounce-walk {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-3px); }
  }
  
/* 지도 마커 옆 Top3 랭킹 배지 */
.map-rank-badge{position:absolute;transform:translate(-50%, 0) translate(0, 8px);background:#111827;color:#fff;border-radius:999px;width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;border:2px solid #fff;box-shadow:0 2px 6px rgba(0,0,0,.25);pointer-events:none}
.map-rank-badge.rank-1{background:linear-gradient(135deg,#f59e0b,#fbbf24)}
.map-rank-badge.rank-2{background:linear-gradient(135deg,#9ca3af,#e5e7eb); color:#111827}
.map-rank-badge.rank-3{background:linear-gradient(135deg,#b45309,#d97706)}

  

.emoji-character {
    font-size: 28px;
    line-height: 1;
    animation-fill-mode: forwards;
    opacity: 0;
    transform: translateY(40px);
    pointer-events: none;
  }
  
@keyframes runAndStand {
    0% {
      opacity: 0;
      transform: translateY(40px) scale(0.8);
    }
    60% {
      opacity: 1;
      transform: translateY(-10px) scale(1.2);
    }
    100% {
      opacity: 1;
      transform: translateY(0px) scale(1);
    }
  }
  
  .run-character img {
    animation: bounce-run 0.4s infinite;
  }
  
  .walk-character img {
    animation: bounce-walk 1s infinite;
  }
  
  @keyframes bounce-run {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-6px); }
  }
  
  @keyframes bounce-walk {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-3px); }
  }
  
/* Age Focus Popup Styles */
.age-focus-popup {
  background: #ffffff;
  border: 2px solid #4CAF50;
  border-radius: 16px;
  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25);
  padding: 0;
  min-width: 280px;
  max-width: 320px;
  pointer-events: auto;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  overflow: hidden;
  opacity: 1;
  backdrop-filter: none;
  z-index: 999999 !important;
  position: relative;
}

.popup-header {
  background: #4CAF50;
  color: white;
  padding: 16px 20px;
  display: flex;
  align-items: center;
  gap: 12px;
  opacity: 1;
}

.rank-badge {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 14px;
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.3);
}

.library-name {
  font-weight: 600;
  font-size: 16px;
  line-height: 1.3;
  flex: 1;
  word-break: keep-all;
  overflow-wrap: break-word;
}

.popup-content {
  padding: 20px;
  background: #ffffff;
  opacity: 1;
}

.address-section {
  margin-bottom: 20px;
}

.address-label {
  font-size: 12px;
  font-weight: 600;
  color: #6b7280;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 8px;
}

.address-text {
  font-size: 14px;
  line-height: 1.5;
  color: #1f2937;
  word-break: break-all;
  overflow-wrap: break-word;
  font-weight: 500;
  padding: 8px;
  background: #f9fafb;
  border-radius: 8px;
  border: 1px solid #e5e7eb;
  white-space: normal;
}

.ratio-section {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.ratio-label {
  font-size: 13px;
  font-weight: 600;
  color: #374151;
  flex: 1;
  margin-right: 8px;
}

.pie-chart-container {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

.pie-chart-container svg {
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
}


.rv-info-card{position:absolute;left:50%;bottom:20px;transform:translate(-50%, 20px);background:#ffffff;border:1px solid rgba(0,0,0,.12);border-radius:14px;box-shadow:0 14px 28px rgba(0,0,0,.25);z-index:10000;opacity:0;transition:opacity .25s ease, transform .25s ease;min-width:280px;max-width:90%;pointer-events:auto}
.rv-info-card.show{opacity:1;transform:translate(-50%, 0)}
.rv-card-inner{padding:14px 16px}
.rv-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px}
.rv-title{font-weight:700;color:#111827;font-size:16px}
.rv-close{border:none;background:#111827;color:#fff;width:28px;height:28px;border-radius:50%;cursor:pointer}
.rv-meta{font-size:12px;color:#6b7280;margin-bottom:8px}
.rv-stats{display:flex;gap:8px;flex-wrap:wrap}
.rv-chip{border-radius:999px;padding:6px 10px;font-size:12px;border:1px solid rgba(0,0,0,.08);background:#f9fafb;color:#111827}
.rv-chip.green{background:#ecfdf5;border-color:#d1fae5;color:#065f46}
.rv-chip.blue{background:#eff6ff;border-color:#dbeafe;color:#1e40af}
.rv-chip.gray{background:#f3f4f6;border-color:#e5e7eb;color:#374151}

.rv-toast{position:absolute;left:50%;top:16px;transform:translate(-50%,-10px);background:rgba(17,24,39,.92);color:#fff;padding:.5rem .75rem;border-radius:8px;opacity:0;transition:opacity .2s ease, transform .2s ease;z-index:20}
.rv-toast.show{opacity:1;transform:translate(-50%,0)}

.rv-fullscreen{position:fixed;inset:0;width:100vw;height:100vh;display:none;z-index:9999;background:#000}

.character-wrapper {
    z-index: 1 !important;
    pointer-events: none;
    position: absolute;
  }

/* 도서관 상세 정보 뷰 스타일 */
.library-detail-view {
  background: #ffffff;
  border-radius: 16px;
  box-shadow: 0 10px 28px rgba(0,0,0,0.12);
  overflow: hidden;
  height: 100%;
}

.library-detail-header {
  background: linear-gradient(135deg, #3b82f6, #60a5fa);
  color: #ffffff;
  padding: 1.5rem;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.library-detail-header h3 {
  margin: 0;
  font-size: 1.3rem;
  font-weight: 600;
  flex: 1;
}

.library-detail-close {
  background: rgba(255, 255, 255, 0.2);
  border: none;
  color: #ffffff;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  cursor: pointer;
  font-size: 1.2rem;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
  flex-shrink: 0;
}

.library-detail-close:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: scale(1.1);
}

.library-detail-content {
  padding: 1.5rem;
  max-height: calc(100vh - 300px);
  overflow-y: auto;
}

.detail-section {
  margin-bottom: 1.5rem;
  padding: 1.2rem;
  background: #f8fafc;
  border-radius: 12px;
  border: 1px solid #e2e8f0;
}

.detail-section:last-child {
  margin-bottom: 0;
}

.detail-section h4 {
  margin: 0 0 1rem 0;
  color: #1e293b;
  font-size: 1.1rem;
  font-weight: 600;
  border-bottom: 2px solid #3b82f6;
  padding-bottom: 0.5rem;
}

.detail-section p {
  margin: 0.5rem 0;
  color: #475569;
  font-size: 0.95rem;
  line-height: 1.5;
}

.detail-section strong {
  color: #1e293b;
  font-weight: 600;
}

.detail-section a {
  color: #3b82f6;
  text-decoration: none;
  word-break: break-all;
}

.detail-section a:hover {
  text-decoration: underline;
}

/* 스크롤바 스타일 */
.library-detail-content::-webkit-scrollbar {
  width: 6px;
}

.library-detail-content::-webkit-scrollbar-track {
  background: #f1f5f9;
  border-radius: 3px;
}

.library-detail-content::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 3px;
}

.library-detail-content::-webkit-scrollbar-thumb:hover {
  background: #94a3b8;
}

/* 장르별 한눈에 보기 반응형 디자인 */
@media (max-width: 768px) {
  .advanced-rankings {
    gap: 1rem;
    margin-top: 1.5rem;
  }
  
  .ranking-category {
    padding: 1rem;
  }
  
  .ranking-category h3 {
    font-size: 1.1rem;
  }
  
  .ranking-tabs {
    gap: 0.3rem;
  }
  
  .ranking-tab {
    padding: 0.3rem 0.6rem;
    font-size: 0.7rem;
    min-width: 50px;
  }
}

@media (max-width: 480px) {
  .advanced-rankings {
    gap: 0.8rem;
    margin-top: 1rem;
  }
  
  .ranking-category {
    padding: 0.8rem;
  }
  
  .ranking-category h3 {
    font-size: 1rem;
  }
  
  .ranking-tabs {
    gap: 0.25rem;
  }
  
  .ranking-tab {
    padding: 0.25rem 0.5rem;
    font-size: 0.65rem;
    min-width: 45px;
  }
}
